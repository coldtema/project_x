{% extends 'base.html' %}
{% block title %}–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
  <h1 class="text-2xl font-bold mb-6 text-gray-900 dark:text-white">–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏</h1>

  <!-- –¢–µ–∫—É—â–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏ -->
  <div class="mb-8">
    <h2 class="text-lg font-semibold text-gray-800 dark:text-white mb-2">üîî –í–∞—à–∏ –ø–æ–¥–ø–∏—Å–∫–∏</h2>
    <div class="space-y-4">
      <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
      <div>
        <h3 class="text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏:</h3>
        <div class="flex flex-wrap gap-2">
          {% for cat in subs_cats %}
            <span class="inline-block bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100 text-xs px-3 py-1 rounded-full">
              {{ cat.name }}
            </span>
          {% empty %}
            <p class="text-sm text-gray-500 dark:text-gray-400">–ù–µ—Ç –ø–æ–¥–ø–∏—Å–æ–∫ –Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.</p>
          {% endfor %}
        </div>
      </div>

      <!-- –ë—Ä–µ–Ω–¥—ã -->
      <div>
        <h3 class="text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1">–ë—Ä–µ–Ω–¥—ã:</h3>
        <div class="flex flex-wrap gap-2">
          {% for brand in subs_brand %}
            <span class="inline-block bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100 text-xs px-3 py-1 rounded-full">
              {{ brand.name }}
            </span>
          {% empty %}
            <p class="text-sm text-gray-500 dark:text-gray-400">–ù–µ—Ç –ø–æ–¥–ø–∏—Å–æ–∫ –Ω–∞ –±—Ä–µ–Ω–¥—ã.</p>
          {% endfor %}
        </div>
      </div>

      <!-- –°–µ–ª–ª–µ—Ä—ã -->
      <div>
        <h3 class="text-sm font-semibold text-gray-700 dark:text-gray-300 mb-1">–°–µ–ª–ª–µ—Ä—ã:</h3>
        <div class="flex flex-wrap gap-2">
          {% for seller in subs_seller %}
            <span class="inline-block bg-purple-100 text-purple-800 dark:bg-purple-800 dark:text-purple-100 text-xs px-3 py-1 rounded-full">
              {{ seller.name }}
            </span>
          {% empty %}
            <p class="text-sm text-gray-500 dark:text-gray-400">–ù–µ—Ç –ø–æ–¥–ø–∏—Å–æ–∫ –Ω–∞ —Å–µ–ª–ª–µ—Ä–æ–≤.</p>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>

  <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å—Å—ã–ª–∫–∏ -->
  <div class="mb-10">
    <h2 class="text-lg font-semibold text-gray-800 dark:text-white mb-2">‚ûï –î–æ–±–∞–≤–∏—Ç—å –±—Ä–µ–Ω–¥ –∏–ª–∏ —Å–µ–ª–ª–µ—Ä–∞ –ø–æ —Å—Å—ã–ª–∫–µ</h2>
    <form method="post" class="space-y-4">
      {% csrf_token %}
      <input type="url" name="url" required placeholder="–í—Å—Ç–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ –±—Ä–µ–Ω–¥ –∏–ª–∏ —Å–µ–ª–ª–µ—Ä–∞"
             class="w-full border border-gray-300 dark:border-neutral-700 rounded-md px-4 py-2 text-sm bg-white dark:bg-neutral-800 text-gray-900 dark:text-white focus:ring-indigo-500 focus:border-indigo-500 transition">
      <button type="submit"
              class="bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-semibold px-4 py-2 rounded-md transition">
        üîç –î–æ–±–∞–≤–∏—Ç—å –≤ –ø–æ–¥–ø–∏—Å–∫—É
      </button>
    </form>
  </div>

 <div>
  <h2 class="text-lg font-semibold text-gray-800 dark:text-white mb-2">üìÇ –í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è</h2>
  <form method="post" class="space-y-4">
    {% csrf_token %}
    
    {% for parent, children in parent_to_children.items %}
      <details class="bg-white dark:bg-neutral-800 border border-gray-300 dark:border-neutral-700 rounded-md">
        <summary class="cursor-pointer select-none px-4 py-2 text-gray-900 dark:text-white font-medium hover:bg-gray-100 dark:hover:bg-neutral-700 transition">
          {{ parent }}
        </summary>
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 px-4 pb-4 pt-2">
          {% for category in children %}
            <label class="flex items-center space-x-2">
              <input type="checkbox" name="categories" value="{{ category.id }}"
                     {% if category.id in subs_cats_ids %}checked{% endif %}
                     class="accent-indigo-600 dark:accent-indigo-400">
              <span class="text-sm text-gray-900 dark:text-gray-100">{{ category.name }}</span>
            </label>
          {% endfor %}
        </div>
      </details>
    {% endfor %}

    <div class="mt-4">
      <button type="submit"
              class="bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-semibold px-4 py-2 rounded-md transition">
        üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
      </button>
    </div>
  </form>
</div>

</div>
{% endblock %}
