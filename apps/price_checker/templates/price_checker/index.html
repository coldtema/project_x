{% extends 'base.html' %}
{% block title %}PriceChecker{% endblock title %}
{% block content %}
<div class="max-w-6xl mx-auto px-4 py-8">
    <h1 class="text-2xl font-bold mb-4">–í–≤–µ–¥–∏—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ —Ç–æ–≤–∞—Ä</h1>

    <form method="POST" class="bg-white dark:bg-gray-800 shadow-md rounded-lg p-6 space-y-4 border-2 border-blue-600 dark:border-blue-400">
        {% csrf_token %}
        <div class="space-y-4 text-gray-800 dark:text-white">
            {% for field in form %}
                <div>
                    <label for="{{ field.id_for_label }}" class="block mb-1 font-medium">
                        {{ field.label }}
                    </label>
                    {{ field }}
                    {% if field.errors %}
                        <p class="text-sm text-red-500 mt-1">{{ field.errors|striptags }}</p>
                    {% endif %}
                </div>
            {% endfor %}
        </div>
        <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold px-4 py-2 rounded shadow">
            –¢—ã–∫
        </button>
    </form>
    
    

    <div class="mt-8 space-y-2">
        <a href="{% url 'price_checker:update_prices' %}" class="text-blue-600 hover:underline text-lg">üîÑ –û–±–Ω–æ–≤–∏—Ç—å —Ü–µ–Ω—ã</a><br>
        <a href="{% url 'price_checker:search_product' %}" class="text-blue-600 hover:underline text-lg">üîç –ü–æ–∏—Å–∫ –ø–æ –ø—Ä–æ–¥—É–∫—Ç–∞–º</a>
    </div>

    <div class="overflow-x-auto mt-6">
        <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-600 border border-gray-300 dark:border-gray-700 rounded-lg overflow-hidden">
            <thead class="bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-200 text-sm">
                <tr>
                    <th class="px-4 py-2 text-left">ID</th>
                    <th class="px-4 py-2 text-left">Shop</th>
                    <th class="px-4 py-2 text-left">Category</th>
                    <th class="px-4 py-2 text-left">Name</th>
                    <th class="px-4 py-2 text-left">Price</th>
                    <th class="px-4 py-2 text-left">Price History</th>
                    <th class="px-4 py-2 text-left">Action</th>
                </tr>
            </thead>
            <tbody class="divide-y divide-gray-200 dark:divide-gray-700 text-sm">
                {% for elem in db_products_page %}
                <tr class="hover:bg-gray-50 dark:hover:bg-gray-800">
                    <td class="px-4 py-2">{{ elem.id }}</td>
                    <td class="px-4 py-2">{{ elem.shop }}</td>
                    <td class="px-4 py-2">
                        {% for item in elem.shop.tags.all %}
                            <span class="inline-block bg-blue-100 text-blue-800 text-xs font-medium mr-1 px-2 py-0.5 rounded dark:bg-blue-900 dark:text-blue-200">{{ item }}</span>
                        {% endfor %}
                    </td>
                    <td class="px-4 py-2">
                        <a href="{{ elem.url }}" target="_blank" class="text-blue-600 hover:underline">{{ elem.name }}</a>
                    </td>
                    <td class="px-4 py-2">{{ elem.latest_price }}</td>
                    <td class="px-4 py-2">
                        <a href="{% url 'price_checker:price_history' id=elem.id %}" class="text-indigo-600 hover:underline">–ò—Å—Ç–æ—Ä–∏—è</a>
                    </td>
                    <td class="px-4 py-2">
                        <a href="{% url 'price_checker:delete_product' id=elem.id %}" class="text-red-600 hover:underline">–£–¥–∞–ª–∏—Ç—å</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="mt-6">
        {% include "price_checker/pagination.html" with page=db_products_page page_range=page_range %}
    </div>
</div>
{% endblock content %}
